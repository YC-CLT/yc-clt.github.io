<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çˆ¶äº²ç”Ÿæ—¥å¿«ä¹â€”â€”ä¸€ç§åŸºäºJSçš„ä¼ªshellç”Ÿæ—¥ç¥ç¦ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Consolas', monospace;
            background: #000;
            color: #0f0;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }
        
#terminal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 900px;
    height: 60%;
    max-height: 500px;
    background: rgba(0, 0, 0, 0.85);
    border: 2px solid #333;
    border-radius: 8px;
    padding: 20px;
    z-index: 10;
    overflow-y: auto;
    box-shadow: 0 0 25px rgba(0, 255, 0, 0.2), 
                0 0 40px rgba(0, 255, 0, 0.1) inset;
    font-family: 'Consolas', 'Monaco', 'Courier New', 'Lucida Console', monospace;
}

#terminal-content {
    line-height: 1.4;
    font-size: 15px;
    white-space: pre-wrap;
    color: #ccc;
    text-shadow: 0 0 2px #0f0;
    font-family: inherit;
}

.prompt {
    color: #0f0;
    font-weight: bold;
    text-shadow: 0 0 5px #0f0;
}

.cursor {
    display: inline-block;
    width: 8px;
    height: 16px;
    background: #0f0;
    animation: blink 1s infinite;
    margin-left: 2px;
    vertical-align: middle;
    box-shadow: 0 0 5px #0f0;
}

/* ç»ˆç«¯æ ‡é¢˜æ æ ·å¼ */
#terminal::before {
    content: 'ç»ˆç«¯ - birthday-system';
    position: absolute;
    top: -25px;
    left: 0;
    background: #333;
    color: #0f0;
    padding: 5px 15px;
    border-radius: 5px 5px 0 0;
    font-size: 12px;
    font-family: inherit;
    border: 1px solid #0f0;
    border-bottom: none;
}

/* ç»ˆç«¯æ»šåŠ¨æ¡æ ·å¼ */
#terminal::-webkit-scrollbar {
    width: 8px;
}

#terminal::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
}

#terminal::-webkit-scrollbar-thumb {
    background: rgba(0, 255, 0, 0.3);
    border-radius: 4px;
}

#terminal::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 255, 0, 0.5);
}

@keyframes terminalBoot {
    0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

@keyframes systemInit {
    0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 0, 0.3); }
    50% { box-shadow: 0 0 40px rgba(0, 255, 0, 0.8); }
}

@keyframes messageSend {
    0%, 100% { border-color: #333; box-shadow: 0 0 25px rgba(0, 255, 0, 0.2); }
    50% { border-color: #ff0; box-shadow: 0 0 40px rgba(255, 255, 0, 0.8); }
}

@keyframes textGlow {
    from { text-shadow: 0 0 10px #ff0, 0 0 20px #ff0; }
    to { text-shadow: 0 0 20px #ff0, 0 0 40px #ff0; }
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

        
        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        #digital-rain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
        }
        
        .rocket {
            position: absolute;
            width: 60px;
            height: 60px;
            font-size: 80px;
            text-align: center;
            line-height: 60px;
            z-index: 3;
            animation: fly 20s linear infinite;
            text-shadow: 0 0 10px #ff6b00, 0 0 20px #ff6b00;
        }
        
        @keyframes fly {
            0% {
                transform: translateX(-150px) translateY(0) rotate(15deg);
            }
            100% {
                transform: translateX(calc(100vw + 150px)) translateY(calc(-100vh - 200px)) rotate(15deg);
            }
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #0f0;
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
        }
        
        .hidden {
            display: none;
        }
        
        #birthday-message {
            color: #ff0;
            font-size: 18px;
            margin-top: 20px;
            text-shadow: 0 0 10px #ff0;
        }
        /* å¢å¼ºç‚¹å‡»å¯åŠ¨ç•Œé¢ç‰¹æ•ˆ */
@keyframes particleExplosion {
    from { transform: scale(0); opacity: 1; }
    to { transform: scale(3); opacity: 0; }
}

.hologram-text {
    background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ff00);
    background-size: 400% 400%;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: hologramShift 3s ease-in-out infinite alternate;
}

@keyframes hologramShift {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    <canvas id="digital-rain"></canvas>
    
    <div id="terminal">
        <div id="terminal-content"></div>
    </div>
    
    <script>
        // æ–‡æœ¬å†…å®¹
        const birthdayMessage = `äº²çˆ±çš„çˆ¸çˆ¸\n\nç”Ÿæ—¥å¿«ä¹ï¼ğŸ‰ğŸ“šğŸ«\n\næ‚¨ä¸ä»…æ˜¯å°é•‡çš„ç­‘æ¢¦å¸ˆâ€”â€”\nåœ¨ä¸‰å°ºè®²å°æ’­ç§çŸ¥è¯†çš„æ˜Ÿå…‰\nç”¨ç²‰ç¬”ä¹¦å†™äººç”Ÿçš„è¯—è¡Œ\næ›´æ˜¯æˆ‘æ°¸è¿œçš„å¯æ˜æ˜Ÿ\nä¸ºè¿·é€”çš„æˆ‘æŒ‡å¼•æ–¹å‘\n\n"æ•™è‚²æ˜¯ç‚¹äº®å¿ƒç¯çš„äº‹ä¸š"\næ‚¨ç”¨å…è½½æ˜¥ç§‹\nåœ¨é’çŸ³æ¿ä¸Šåˆ»ä¸‹å¸ˆé“ä¼ æ‰¿\nç”¨ç™½å‘æ¢å¾—æ¡ƒææ»¡å›­é¦™\n\nçˆ¶çˆ±å¦‚å±± å·å³¨ç»µé•¿\næ‚¨ç”¨åšå®çš„è‡‚è†€\næ‰˜èµ·æˆ‘æ¢ç´¢ä¸–ç•Œçš„æ¸´æœ›\nè°†è°†æ•™è¯²å¦‚æ˜¥é£åŒ–é›¨\næ¶¦æ³½æˆ‘ç”Ÿå‘½çš„åŸé‡\n\næ„¿å²æœˆæ¸©æŸ”ä»¥å¾…\nç¥æ‚¨åº·å¥å¸¸ä¹ æ¡ƒæèŠ¬èŠ³\n\næ°¸è¿œä»¥æ‚¨ä¸ºè£çš„å„¿å­æ•¬ä¸Š â¤ï¸ğŸ“`;
        // éŸ³é¢‘æ’­æ”¾å‡½æ•°
    function playSound(filename, loop = false) {
        try {
            const audio = new Audio(filename);
            audio.loop = loop;
            audio.play().catch(e => console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', e));
            
            // æ·»åŠ stopæ–¹æ³•
            audio.stop = function() {
                this.pause();
                this.currentTime = 0;
            };
            
            return audio;
        } catch (error) {
            console.log('éŸ³é¢‘åŠ è½½å¤±è´¥:', error);
        }
    }

        // ç»ˆç«¯å…ƒç´ 
        const terminalContent = document.getElementById('terminal-content');
        const canvasContainer = document.getElementById('canvas-container');
        
    // åˆ›å»ºç«ç®­ï¼ˆæ”¹ä¸ºéšæœºç”Ÿæ—¥å…ƒç´ ï¼‰
    function createRockets() {
        // ç”Ÿæ—¥ç›¸å…³emojiæ•°ç»„
        const birthdayEmojis = ['ğŸ‚', 'ğŸ', 'ğŸ‰', 'ğŸŠ', 'ğŸˆ', 'ğŸ¥³', 'âœ¨', 'ğŸŒŸ', 'â¤ï¸', 'ğŸ’'];
    
        for (let i = 0; i < 8; i++) {
            const rocket = document.createElement('div');
            rocket.className = 'rocket';
            // éšæœºé€‰æ‹©ç”Ÿæ—¥emoji
            const randomEmoji = birthdayEmojis[Math.floor(Math.random() * birthdayEmojis.length)];
            rocket.textContent = randomEmoji;
        
            // è®¾ç½®éšæœºåˆå§‹ä½ç½®ï¼ˆåˆ†æ•£åœ¨å±å¹•åº•éƒ¨ï¼‰
            const randomStartX = Math.random() * window.innerWidth;
            const randomStartY = window.innerHeight + Math.random() * 100;
        
            // ä½¿ç”¨è‡ªå®šä¹‰å±æ€§è®¾ç½®åˆå§‹ä½ç½®
            rocket.style.setProperty('--start-x', `${randomStartX}px`);
            rocket.style.setProperty('--start-y', `${randomStartY}px`);
            rocket.style.left = `${randomStartX}px`;
            rocket.style.top = `${randomStartY}px`;
        
            rocket.style.animationDelay = `${Math.random() * 20}s`;
            rocket.style.animationDuration = `${15 + Math.random() * 10}s`;
        
            // æ ¹æ®ä¸åŒçš„emojiè®¾ç½®ä¸åŒçš„é¢œè‰²æ•ˆæœ
            if (randomEmoji === 'ğŸ‚' || randomEmoji === 'ğŸ') {
                rocket.style.textShadow = '0 0 10px #ff6b00, 0 0 20px #ff6b00';
            } else if (randomEmoji === 'ğŸ‰' || randomEmoji === 'ğŸŠ') {
                rocket.style.textShadow = '0 0 10px #ff0000, 0 0 20px #ff0000';
            } else if (randomEmoji === 'âœ¨' || randomEmoji === 'ğŸŒŸ') {
                rocket.style.textShadow = '0 0 10px #ffff00, 0 0 20px #ffff00';
            } else if (randomEmoji === 'â¤ï¸' || randomEmoji === 'ğŸ’') {
                rocket.style.textShadow = '0 0 10px #ff1493, 0 0 20px #ff1493';
            } else {
                rocket.style.textShadow = '0 0 10px #00ff00, 0 0 20px #00ff00';
            }
        document.body.appendChild(rocket);
    }
}
        
        // æ•°å­—é›¨æ•ˆæœ
        function initDigitalRain() {
            const canvas = document.getElementById('digital-rain');
            const ctx = canvas.getContext('2d');
            
            // è®¾ç½®canvaså°ºå¯¸
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            const chars = "01";
            const fontSize = 14;
            const columns = Math.floor(canvas.width / fontSize);
            const drops = [];
            
            // åˆå§‹åŒ–é›¨æ»´ä½ç½®
            for (let i = 0; i < columns; i++) {
                drops[i] = Math.floor(Math.random() * canvas.height / fontSize);
            }
            
            function draw() {
                // åŠé€æ˜èƒŒæ™¯åˆ›å»ºæ‹–å°¾æ•ˆæœ
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#0f0';
                ctx.font = `${fontSize}px Consolas`;
                
                for (let i = 0; i < drops.length; i++) {
                    const text = chars[Math.floor(Math.random() * chars.length)];
                    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                    
                    // é‡ç½®é›¨æ»´ä½ç½®
                    if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    
                    drops[i]++;
                }
            }
            
            setInterval(draw, 33);
        }
        
        // ç²’å­ç‰¹æ•ˆ
        function initParticles() {
            document.addEventListener('click', function(e) {
                playSound('click.wav');
                createParticles(e.clientX, e.clientY);
            });
        }
        
        function createParticles(x, y) {
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                
                const angle = Math.random() * Math.PI * 2;
                const speed = 2 + Math.random() * 3;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                
                document.body.appendChild(particle);
                
                let opacity = 1;
                const fadeInterval = setInterval(() => {
                    opacity -= 0.02;
                    particle.style.opacity = opacity;
                    
                    if (opacity <= 0) {
                        clearInterval(fadeInterval);
                        document.body.removeChild(particle);
                    }
                }, 30);
                
                let posX = x;
                let posY = y;
                const moveInterval = setInterval(() => {
                    posX += vx;
                    posY += vy;
                    particle.style.left = `${posX}px`;
                    particle.style.top = `${posY}px`;
                    
                    if (opacity <= 0) {
                        clearInterval(moveInterval);
                    }
                }, 30);
            }
        }
        
        // æµå¼æ‰“å°å‡½æ•°
        async function typeWriter(text, element, speed = 50) {
            return new Promise(resolve => {
                let i = 0;
                const timer = setInterval(() => {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        // æ»šåŠ¨åˆ°åº•éƒ¨
                        terminal.scrollTop = terminal.scrollHeight;
                    } else {
                        clearInterval(timer);
                        resolve();
                    }
                }, speed);
            });
        }

// åˆå§‹åŒ–ç»ˆç«¯ - çˆ¶äº²èŠ‚ç‰¹åˆ«ç‰ˆ
async function initTerminal() {
    const initSound = playSound('initTerminal.wav', true);

    // æ·»åŠ ç»ˆç«¯å¯åŠ¨åŠ¨ç”»
    terminal.style.animation = 'terminalBoot 0.5s ease-out';
    terminal.style.transform = 'translate(-50%, -50%) scale(1.05)';
    terminal.style.boxShadow = '0 0 50px rgba(0, 255, 0, 0.8)';
    setTimeout(() => {
        terminal.style.transform = 'translate(-50%, -50%) scale(1)';
        terminal.style.boxShadow = '0 0 25px rgba(0, 255, 0, 0.2)';
    }, 500);
    
    terminalContent.innerHTML = '';
    
    // è·å–å½“å‰æ—¶é—´ç”¨äºæ˜¾ç¤º
    const now = new Date();
    const loginTime = now.toLocaleTimeString('zh-CN', { 
        hour: '2-digit', 
        minute: '2-digit',
        second: '2-digit'
    });
    
    // UEFI/BIOSå¯åŠ¨ç•Œé¢
    await typeWriter("\n\n BIOS v19- Father's Legacy Edition\n", terminalContent, 3);
    await typeWriter("  ========================================================\n\n", terminalContent, 3);
    await new Promise(resolve => setTimeout(resolve, 600));
    
    // ç¡¬ä»¶æ£€æµ‹ - ä½“ç°çˆ¶äº²çš„å“è´¨
    await typeWriter("  Testing Wisdom RAM: 32768MB @ 6400MHz OK\n", terminalContent, 2);
    await typeWriter("  Memory Type: Patience & Understanding DDR5\n", terminalContent, 2);
    await new Promise(resolve => setTimeout(resolve, 300));
    
    await typeWriter("  CPU: Legacy Processor 16-Core @ 5.0GHz (Support VT-x/AMD-V)\n", terminalContent, 2);
    await typeWriter("  Features: Sacrifice Technology, Protection Mode, Guidance Engine\n", terminalContent, 2);
    await new Promise(resolve => setTimeout(resolve, 400));
    
    // å¯åŠ¨è®¾å¤‡æ£€æµ‹
    await typeWriter("  Booting from: Heart NVMe SSD 4TB \n", terminalContent, 2);
    await typeWriter("  Secure Boot: Enabled (Trusted Platform Module 2.0)\n\n", terminalContent, 2);
    await new Promise(resolve => setTimeout(resolve, 500));
    
    // GRUB2å¼•å¯¼ç•Œé¢
    await typeWriter("  GNU GRUB version 2.12\n", terminalContent, 3);
    await typeWriter("  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n", terminalContent, 3);
    await typeWriter("  > Father's Legacy OS 3.0 (default)\n", terminalContent, 3);
    await typeWriter("    Father's Legacy OS 3.0 (recovery mode)\n", terminalContent, 3);
    await typeWriter("    Memory Diagnostics\n\n", terminalContent, 3);
    await new Promise(resolve => setTimeout(resolve, 1200));
    
    // å†…æ ¸å¯åŠ¨è¿‡ç¨‹
    await typeWriter("  Loading Linux 6.6.0-father-generic...\n", terminalContent, 2);
    await typeWriter("  Initializing cgroup subsys cpu\n", terminalContent, 1);
    await typeWriter("  Initializing cgroup subsys memory\n", terminalContent, 1);
    await typeWriter("  CPU: Intel(R) Core(TM) i9-14900K (32) 64-bit mode\n", terminalContent, 1);
    await typeWriter("  SMP: Total of 32 processors activated (921600.00 BogoMIPS)\n", terminalContent, 1);
    await typeWriter("  Mounting root filesystem: ext4 [OK]\n", terminalContent, 1);
    await new Promise(resolve => setTimeout(resolve, 800));
    
    // åœ¨ç³»ç»ŸæœåŠ¡å¯åŠ¨éƒ¨åˆ†æ·»åŠ è¿›åº¦æ¡æ•ˆæœ
await typeWriter("  Starting essential system services:\n\n", terminalContent, 3);

// ä½¿ç”¨å¸¦éšæœºé€Ÿåº¦çš„è¿›åº¦æ¡æ•ˆæœ
await typeWriterWithRandomProgress("  Starting Wisdom Distribution Service", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Protection Daemon", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Sacrifice Engine", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Guidance System", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Love Compiler", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Memory Archive Service", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Future Planning Module", "[  OK  ]", terminalContent);
await typeWriterWithRandomProgress("  Starting Support Framework", "[  OK  ]", terminalContent);

await typeWriter("\n", terminalContent, 1);
await new Promise(resolve => setTimeout(resolve, 500));
    
    // ç™»å½•ç•Œé¢
    await typeWriter("  Father's Legacy OS 3.0 (tty1)\n", terminalContent, 3);
    await typeWriter("\n", terminalContent, 1);
    await typeWriter("  father-legacy login: son\n", terminalContent, 3);
    await typeWriter("  Password: ********\n\n", terminalContent, 3);
    await new Promise(resolve => setTimeout(resolve, 800));

    // ç™»å½•æˆåŠŸä¿¡æ¯
    await typeWriter("  Last login: " + loginTime + " from 192.168.1.2\n", terminalContent, 3);
    await new Promise(resolve => setTimeout(resolve, 1000));
    
      // æ·»åŠ é—ªçƒå…‰æ ‡
    terminalContent.innerHTML += '<span class="cursor"></span>';
    await new Promise(resolve => setTimeout(resolve, 2000));
    initSound.stop();

    // ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„removeChildæ–¹æ³•
    const cursorElement = terminalContent.querySelector('.cursor');
    if (cursorElement) {
        terminalContent.removeChild(cursorElement);
    }
    terminalContent.innerHTML += '\n';
    await new Promise(resolve => setTimeout(resolve, 500));

    await typeWriter("  æŒ‰ä»»æ„é”®ç»§ç»­...\n", terminalContent, 3);
    
    // ä½¿ç”¨ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬å™¨ï¼Œç¡®ä¿åªè§¦å‘ä¸€æ¬¡
    const clickHandler = () => {
        terminalContent.removeEventListener('click', clickHandler);
        initSystem();
    };
    terminalContent.addEventListener('click', clickHandler);
}

async function initSystem() {
    const initSound = playSound('initSys.wav', true);

    // æ·»åŠ ç³»ç»Ÿåˆå§‹åŒ–å…‰æ•ˆ
    terminal.style.animation = 'systemInit 1s ease-in-out';
    terminal.style.background = 'linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(0, 30, 0, 0.9))';

    await typeWriter("  ç³»ç»Ÿåˆå§‹åŒ–ä¸­...\n",terminalContent,50);
    await typeWriterWithRandomProgress("  æ­£åœ¨è¿æ¥æƒ…æ„Ÿåˆ†ææ¨¡å—", "[  OK  ]", terminalContent);
    await typeWriterWithRandomProgress("  åŠ è½½çˆ¶å­å…³ç³»æ•°æ®åº“", "[  OK  ]", terminalContent);
    await typeWriterWithRandomProgress("  æ­£åœ¨åŠ è½½è®°å¿†æ¨¡å—", "[  OK  ]", terminalContent);
    await typeWriterWithRandomProgress("  å¼€å§‹åˆ†æçˆ¶å­æƒ…æ„Ÿæ•°æ®", "[  OK  ]", terminalContent);
    await typeWriter("  æ£€æµ‹åˆ°æ·±åšæƒ…æ„Ÿè¿æ¥\n", terminalContent, 50);
    await typeWriter("  æƒ…æ„Ÿåˆ†æç»“æœï¼šçˆ¶çˆ±æŒ‡æ•° 99.9%\n", terminalContent, 50);
    await typeWriterWithRandomProgress("  ç”Ÿæˆç”Ÿæ—¥ç¥ç¦åè®®\n", terminalContent, 50);
    await typeWriter("  åè®®ç”Ÿæˆå®Œæˆ\n", terminalContent, 50);
    initSound.stop();
    await new Promise(resolve => setTimeout(resolve, 500));

    setTimeout(() => {
        terminal.style.background = 'rgba(0, 0, 0, 0.85)';
    }, 1000);

    // åˆ›å»ºäº¤äº’å¼å‘½ä»¤è¡Œ
    await createInteractiveTerminal();
}

async function createInteractiveTerminal() {
    let shouldContinue = true;
    
    // åªæ˜¾ç¤ºä¸€æ¬¡æç¤ºä¿¡æ¯
    await typeWriter("  è¾“å…¥ start å‘é€ç”Ÿæ—¥ç¥ç¦\n", terminalContent, 50);
    
    // åˆ›å»ºå›ºå®šçš„è¾“å…¥å®¹å™¨
    const inputContainer = document.createElement('div');
    inputContainer.style.position = 'relative';
    inputContainer.innerHTML = '<span class="prompt">son@father-legacy:~$ </span>';
    
    // åˆ›å»ºæ™®é€šæ–‡æœ¬è¾“å…¥æ¡†
    const commandInput = document.createElement('input');
    commandInput.type = 'text';
    commandInput.id = 'command-input';
    commandInput.style.cssText = 'background: transparent; border: none; color: #00ff00; font-family: monospace; font-size: 16px; outline: none; width: 300px;';
    
    inputContainer.appendChild(commandInput);
    terminalContent.appendChild(inputContainer);
    
    // å•ä¸€äº‹ä»¶ç›‘å¬å™¨
    const handleKeyDown = (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            const cmd = commandInput.value.trim();
            
            // æ˜¾ç¤ºç”¨æˆ·è¾“å…¥çš„å‘½ä»¤
            const commandDisplay = document.createElement('div');
            commandDisplay.innerHTML = '<span class="prompt">son@father-legacy:~$ </span>' + cmd;
            terminalContent.insertBefore(commandDisplay, inputContainer);
            
            // å¤„ç†å‘½ä»¤
            if (cmd === 'start') {
                // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨å’Œè¾“å…¥å®¹å™¨
                commandInput.removeEventListener('keydown', handleKeyDown);
                terminalContent.removeChild(inputContainer);
                
                // å¯åŠ¨ç”Ÿæ—¥ç¥ç¦å‘é€
                birthdayMessageSender().then(() => {
                    shouldContinue = false;
                });
            } else {
                // ä¸æ˜¯startå‘½ä»¤ï¼Œåˆ·æ–°é¡µé¢
                location.reload();
            }
            
            // ç¡®ä¿æ»šåŠ¨åˆ°åº•éƒ¨
            terminal.scrollTop = terminal.scrollHeight;
        }
    };
    
    // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
    commandInput.addEventListener('keydown', handleKeyDown);
    commandInput.focus();
    
    // ç­‰å¾…å¾ªç¯ç»“æŸ
    while (shouldContinue) {
        await new Promise(resolve => setTimeout(resolve, 100));
    }
}


async function birthdayMessageSender() {
    playSound('sendBirthdayMassage.wav');

    // æ·»åŠ ä¼ è¾“ç‰¹æ•ˆ
    terminal.style.animation = 'messageSend 2s ease-in-out';
    terminal.style.border = '2px solid #ff0';
    terminal.style.boxShadow = '0 0 30px rgba(255, 255, 0, 0.6)';

    await typeWriter("  æ­£åœ¨å¯åŠ¨ç¥ç¦ä¼ è¾“ç¨‹åº...\n", terminalContent, 50);
    await typeWriter("  ä¼ è¾“ç›®æ ‡ï¼šçˆ¶äº²ç”Ÿæ—¥é¢‘é“\n", terminalContent, 50);
    await typeWriterWithRandomProgress("  ä¼ è¾“å¼€å§‹", "[  OK  ]", terminalContent);
    terminalContent.innerHTML += '<span class="prompt">son@father-legacy:~$ </span><br/>';
    await new Promise(resolve => setTimeout(resolve, 500));

    // æ¢å¤ç»ˆç«¯æ ·å¼
    setTimeout(() => {
        terminal.style.border = '2px solid #333';
        terminal.style.boxShadow = '0 0 25px rgba(0, 255, 0, 0.2)';
    }, 2000);
    const bgm = playSound('bgm.mp3', true); // å¼€å§‹æ’­æ”¾èƒŒæ™¯éŸ³ä¹å¹¶å¾ªç¯
    // æ˜¾ç¤ºç”Ÿæ—¥ç¥ç¦
    terminalContent.innerHTML += '<div id="birthday-message"></div>';
    const messageDiv = document.getElementById('birthday-message');
    messageDiv.style.animation = 'textGlow 3s ease-in-out infinite alternate';
    await typeWriter(birthdayMessage, messageDiv, 500);
}


// å¸¦éšæœºé€Ÿåº¦çš„è¿›åº¦æ¡æ‰“å°å‡½æ•°
async function typeWriterWithRandomProgress(text, result, element) {
    return new Promise(resolve => {
        let i = 0;
        const baseText = element.innerHTML;
        const minSpeed = 20; // æœ€å°é€Ÿåº¦
        const maxSpeed = 100; // æœ€å¤§é€Ÿåº¦
        
        // å…ˆæ˜¾ç¤ºæ–‡æœ¬
        const textTimer = setInterval(() => {
            if (i < text.length) {
                // éšæœºé€Ÿåº¦
                const randomSpeed = Math.floor(Math.random() * (maxSpeed - minSpeed + 1)) + minSpeed;
                
                element.innerHTML = baseText + text.substring(0, i + 1);
                i++;
                terminal.scrollTop = terminal.scrollHeight;
                
                // éšæœºæš‚åœï¼Œæ¨¡æ‹ŸçœŸå®ç³»ç»ŸåŠ è½½
                if (Math.random() < 0.1) {
                    clearInterval(textTimer);
                    setTimeout(() => {
                        const newTimer = setInterval(() => {
                            if (i < text.length) {
                                element.innerHTML = baseText + text.substring(0, i + 1);
                                i++;
                                terminal.scrollTop = terminal.scrollHeight;
                            } else {
                                clearInterval(newTimer);
                                showProgressDots();
                            }
                        }, Math.floor(Math.random() * 50) + 30);
                    }, Math.floor(Math.random() * 800) + 200);
                }
            } else {
                clearInterval(textTimer);
                showProgressDots();
            }
        }, Math.floor(Math.random() * 50) + 30);
        
        function showProgressDots() {
            // æ˜¾ç¤ºåŠ¨æ€è¿›åº¦æ¡
            let progress = 0;
            const maxProgress = 100;
            const progressTimer = setInterval(() => {
                progress += Math.floor(Math.random() * 15) + 5;
                if (progress > maxProgress) progress = maxProgress;
                
                const barLength = 20;
                const filled = Math.floor((progress / maxProgress) * barLength);
                const empty = barLength - filled;
                const progressBar = '[' + '='.repeat(filled) + ' '.repeat(empty) + ']';
                
                element.innerHTML = baseText + text + ' ' + progressBar + ' ' + progress + '%';
                terminal.scrollTop = terminal.scrollHeight;
                
                if (progress >= maxProgress) {
                    clearInterval(progressTimer);
                    // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
                    setTimeout(() => {
                        element.innerHTML = baseText + text + ' ' + result + '\n';
                        resolve();
                    }, 300);
                }
            }, Math.floor(Math.random() * 150) + 50);
        }
    });
}
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–è§†è§‰æ•ˆæœï¼Œä½†ä¸ç«‹å³å¯åŠ¨ç»ˆç«¯
        window.onload = function() {
            initDigitalRain();
            createRockets();
            initParticles();
            
            // åˆ›å»ºç§‘å¹»é£æ ¼ç‚¹å‡»å¯åŠ¨ç•Œé¢
            const startScreen = document.createElement('div');
            startScreen.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle at center, rgba(0, 20, 40, 0.95) 0%, rgba(0, 0, 0, 0.98) 70%);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                cursor: pointer;
                overflow: hidden;
            `;
            
            // æ·»åŠ ç§‘æŠ€æ„ŸèƒŒæ™¯ç½‘æ ¼
            const gridOverlay = document.createElement('div');
            gridOverlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: 
                    linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
                background-size: 50px 50px;
                animation: gridMove 20s linear infinite;
                pointer-events: none;
            `;
            
            const startButton = document.createElement('div');
            startButton.style.cssText = `
                position: relative;
                padding: 30px 60px;
                background: linear-gradient(135deg, 
                    rgba(0, 200, 255, 0.1) 0%, 
                    rgba(0, 100, 200, 0.2) 50%, 
                    rgba(0, 200, 255, 0.1) 100%);
                color: #00ffff;
                font-family: 'Orbitron', 'Consolas', monospace;
                font-size: 28px;
                font-weight: bold;
                border-radius: 15px;
                text-align: center;
                border: 2px solid #00ffff;
                box-shadow: 
                    0 0 25px rgba(0, 255, 255, 0.6),
                    0 0 50px rgba(0, 255, 255, 0.3) inset;
                text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
                animation: 
                    neonPulse 2s ease-in-out infinite alternate,
                    hologramFloat 3s ease-in-out infinite alternate;
                backdrop-filter: blur(10px);
                transform-style: preserve-3d;
                transition: all 0.3s ease;
            `;
            startButton.textContent = 'ğŸš€ å¯åŠ¨çˆ¶äº²ç”Ÿæ—¥ç¥ç¦ç³»ç»Ÿ ğŸ¯';
            
            // æ·»åŠ å…‰æ™•æ•ˆæœ
            const glowEffect = document.createElement('div');
            glowEffect.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 200%;
                height: 200%;
                background: radial-gradient(circle, rgba(0, 255, 255, 0.3) 0%, transparent 70%);
                animation: glowPulse 3s ease-in-out infinite alternate;
                pointer-events: none;
                z-index: -1;
            `;
            
            // æ·»åŠ CSSåŠ¨ç”»æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                @keyframes neonPulse {
                    from { box-shadow: 0 0 25px rgba(0, 255, 255, 0.6), 0 0 50px rgba(0, 255, 255, 0.3) inset; }
                    to { box-shadow: 0 0 40px rgba(0, 255, 255, 0.8), 0 0 80px rgba(0, 255, 255, 0.5) inset; }
                }
                @keyframes hologramFloat {
                    from { transform: translateY(0px) rotateX(5deg); }
                    to { transform: translateY(-10px) rotateX(-5deg); }
                }
                @keyframes glowPulse {
                    from { opacity: 0.3; transform: translate(-50%, -50%) scale(0.8); }
                    to { opacity: 0.6; transform: translate(-50%, -50%) scale(1.2); }
                }
                @keyframes gridMove {
                    from { background-position: 0 0; }
                    to { background-position: 50px 50px; }
                }
            `;
            
            startButton.appendChild(glowEffect);
            startScreen.appendChild(gridOverlay);
            startScreen.appendChild(startButton);
            document.head.appendChild(style);
            document.body.appendChild(startScreen);
            
            // æ‚¬åœæ•ˆæœ
            startButton.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05) translateY(-5px)';
                this.style.boxShadow = '0 0 50px rgba(0, 255, 255, 0.8), 0 0 100px rgba(0, 255, 255, 0.5) inset';
            });
            
            startButton.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
            
            // ç‚¹å‡»å¯åŠ¨äº‹ä»¶
            startScreen.addEventListener('click', function() {
                playSound('click.wav');
                this.style.opacity = '0';
                this.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    document.body.removeChild(this);
                    initTerminal(); // ç‚¹å‡»åæ‰å¼€å§‹åˆå§‹åŒ–ç»ˆç«¯
                }, 500);
            });
        };
    </script>
</body>
</html>